<!DOCTYPE html>
<html>
<head>

<!-- 
  Copyright 2013 Microsoft Corporation.
 
  This is free software; you can redistribute it and/or modify it under the
  terms of the Apache License, Version 2.0. A copy of the License can be
  found in the file "license.txt" at the root of this distribution.
-->

<!-- Editor themes -->
<link rel="stylesheet" type="text/css" media="screen" href="lib/vs/editor/css/vs-dark-theme.css" />
<link rel="stylesheet" type="text/css" media="screen" href="lib/vs/editor/css/vs-theme.css" />

<!-- madoko style -->
<link rel="stylesheet" type="text/css" href="styles/madoko.css">

<!-- main style -->
<link rel="stylesheet" type="text/css" href="styles/main.css">

<!-- use the monaco loader to implement "require" -->
<script type="text/javascript" src="lib/vs/loader.js"></script>
<script>
  require.config({
    baseUrl: "lib"
  });
</script>

<!-- install a handler that calls madoko to typeset -->
<script>
require([ "../scripts/util",
          "../scripts/runner",
          "vs/editor/editor.main"],
          function(util,Runner) 
{ 
  require( ["../scripts/ui"], function(UI) {   // UI imports editor internal modules.
    var runner = new Runner();
    var ui     = new UI(runner);
    util.message("ready", util.Msg.Status );
  });
});
</script>


</head>

<body>
<noscript>
<p>Madoko is a dynamic application that requires JavaScript.</p>
<p>Please enable JavaScript in your browser and reload.</p>
</noscript>
<div id="oldbrowser" style="display:none; padding: 1ex">
<p>Madoko uses HTML5 features and requires a recent browser version to work correctly.</p>
<p>Please upgrade your browser to a more recent version.</p>
<p>Madoko is known to work with IE 10+, Chrome version 31+, or Firefox version 27+.</p>
</div>
<div id="app" style="display:none">
<div class="toppane">

<!--
<img src="images/monarch-34px.png" id="logo"/>
insert image:
<input type="file" id="insertImages" name="files[]" title="Add images" accept="image/*"/>
-->
<!--<img id="logo" src="images/madoko-logo.svg"/>-->
<!-- <img id="logo" src="images/madoko-abslogo-xsmall.png"/> -->

</div>
<div id="editorpane" class="pane left">
  <div id="editor-header" class="pane-header">
    <div id="edit-select" class="popup boxed">
      <img id="remote-logo" src="images/madoko-icon-100.png" />
      <span id="edit-select-header">&nbsp;</span>
      <div id="edit-select-content" class="menu boxed">        
      </div>
    </div
    ><div id="document" class="popup"
      ><!--&nbsp;<span class="button boxed"><img class="icon" src="images/tri-down.svg"/></span>&nbsp;-->
      <img id="cloud" class="button" src="images/document.svg"/>
      <div id="document-content" class="menu boxed">
        <!--<div id="load-local" class="menu button" title="Load document from browser local storage"
          ><img src="images/local-logo.svg" class="logo" /> Load from local storage</div>-->
        <div id="load-onedrive" class="button" title="Load document from Onedrive cloud storage"
          ><span class="icon"><img src="images/onedrive-logo.png"/></span>Load from onedrive</div>
        <div id="load-dropbox" class="button disable" title="Load document from Dropbox cloud storage"
          ><span class="icon"><img src="images/dropbox-logo.png"/></span>Load from dropbox</div>
        <div id="new-document" class="button" title="Create a new local document"
          ><span class="icon"><span class="icon"><img src="images/madoko-icon-100.png"/></span></span>New local document</div>
        <hr/>
          <span>&nbsp;Save as:&nbsp;&nbsp;<input id="rename" class="header" value="" type="text"/></span>
        <!-- <div id="sync-local" class="menu button" title="Save workspace to browser local storage"
          ><img src="images/local-logo.svg" class="logo" /> To local storage</div> -->
        <div id="sync-onedrive" class="button" title="Save document to Onedrive cloud storage"
          ><span class="icon"><img src="images/onedrive-logo.png"/></span>To onedrive</div>
        <div id="sync-dropbox" class="button disable" title="Save document to Dropbox cloud storage"
          ><span class="icon"><img src="images/dropbox-logo.png"/></span>To dropbox</div>
      </div>
    </div>
    <div class="buttons">
      <span id="sync"><img id="sync-spinner" class="button spinner" src="images/sync.svg" alt="Synchronize" 
        title="Synchronize with cloud storage" /></span>    
      <div id="menu-settings" class="popup">
        <img class="button" src="images/settings.svg" />
        <div id="menu-settings-content" class="menu boxed">
          <div class="button" title="Synchronize automatically with cloud storage (every 30 seconds)">
            <input type="checkbox" id="checkAutoSync" checked/> Synchronize automatically</div>
          <div class="button" title="Show line numbers in the editor">
            <input type="checkbox" id="checkLineNumbers"/> Show line numbers</div>
          <div class="button" title="Wrap lines in the editor">
            <input type="checkbox" id="checkWrapLines"/> Wrap lines</div>
         <hr/>
          <div class="button" 
               title="Do not update the view until there is a pause in typing.
Delaying the view update increases performance with large documents or slow browsers.">
            <input type="checkbox" id="checkDelayedUpdate"/> Delayed view update</div>
          <div class="button" 
               title="Do not update the view automatically.
This setting can save energy or can be used on very slow browsers to increase responsiveness.">
            <input type="checkbox" id="checkDisableAutoUpdate"/> Disable automatic view updates</div>
          <div class="button" 
               title="Do not use the Madoko server to typeset mathematics and/or the bibliography">
            <input type="checkbox" id="checkDisableServer"/> Disable server</div>         
        </div>
      </div>
      
      <img id="button-editor-wide" class="button" title="Make the editor view wider" src="images/tri-right.svg" />
    </div>
  </div>
  <div class="pane-content boxed" >
    <div id="editor"></div>
  </div>
</div>
<div id="viewpane" class="pane right">
  <div id="view-header" class="pane-header">
    <div class="buttons">
      <img id="button-editor-narrow" class="button" title="Make the document view wider" src="images/tri-left.svg" />
      <div id="help" class="popup">
        <img class="button" src="images/help.svg" alt="Help"/>
        <div id="help-content" class="menu boxed">
          <div>The <a target="_blank" href="http://research.microsoft.com/en-us/um/people/daan/madoko/doc/reference.html"
                >reference manual</a> is a great place to start.
          </div>
          <div>Participate in a 
                <a target="_blank" href="http://madoko.codeplex.com/discussions">discussion</a> 
                or report an 
                <a target="_blank" href="http://madoko.codeplex.com/work/list/basic">issue</a>.
          </div>
          <hr/>
          <div class="notice"
          >Madoko, version <span id="version">0.6-beta</span><br>
               Copyright &copy; 2014, Microsoft Corporation<br>
               Created at Microsoft Research by Daan Leijen.<br>
               Madoko is free software and available under the Apache 2.0 license
               on <a target="_blank" href="http://madoko.codeplex.com">codeplex.com</a>.
          </div>
        </div>
      </div>
      <img id="export-html" title="Export document as a web-page (HTML)"
        class="button" src="images/html-logo.png" alt="Download HTML"/>    
      <img id="export-pdf" title="Export document as PDF"
        class="button" src="images/pdf-logo2.png" alt="Download PDF"/>    
    </div>
    <img id="view-spinner" class="spinner" src="images/spinner-line.svg" alt="view spinner"/>    
    <div id="view-message" class="popup boxed">
      <img id="warning" class="hide" src="images/warn.svg"/>
      <span id="status"></span>
      <div id="koka-console" class="madoko menu boxed">
        <div id="koka-console-out" class="monospace short"></div>
      </div>
    </div>
  </div>
  <div class="pane-content boxed" id="view-container">
    <!-- <div id="view" class="madoko madoko-body"></div> -->
    <iframe id="view" class="view" sandbox="allow-scripts allow-popups" 
            src="preview/preview.html"></iframe>
  </div>
</div>
</div>

<div id="initial" style="display:none; white-space:pre">Title         : Welcome to Madoko
Heading Base  : 2
Author        : You

[TITLE]

~ Note
Madoko is currently still under development. Please do not distribute
this link outside of Microsoft.
~

# Madoko

Madoko is a fast markdown processor for writing great looking articles.
It is especially well suited for high quality scholarly- and industrial
documents for the web and print. It integrates closely with LaTeX and
has great support for things like in-document references,
bibliographies, and mathematics. 

Still, it maintains John Gruber's Markdown philosophy of simplicity and
focus on plain text readability which makes it pleasant to write.

Madoko can connect to your (personal) Onedrive account[^dropbox] and
will automatically synchronize all changes, merging when nessary. This
way, your document is always available from any device.

# Editing

Just edit any text here and the result will show in the window on the
right â†’. If you double click anywhere in the view document. The
editor will synchronize to that location in the editor. Useful shortcuts:

* `Alt-Q`: Reformat the current paragraph to fit 75 characters.
* `Shift-Alt-A`: Put a block comment around the selection.
* You can drag&amp;drop images, include files, LaTeX document classes,
  and bibliography files right into the edit pane.

To learn more about markdown and Madoko's extensions, see:

* The Madoko [reference manual],
* The markdown [cheat sheet],
* And John Grubers' orignal [markdown].


[^dropbox]: Dropbox support is under development.
[cheat sheet]: https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet "Cheat sheet"
[reference manual]: http://research.microsoft.com/en-us/um/people/daan/madoko/doc/reference.html  "Madoko refrence manual"
[markdown]: http://daringfireball.net/projects/markdown/basics "John Grubers' Markdown"

# Some Madoko features       {#sec-features}

Here is a famous equation by [Euler]:

~ Equation { #euler }
e = \lim_{n\to\infty} \left( 1 + \frac{1}{n} \right)^n
~

A definition of $e$ is shown in Equation [#euler] in
Section [#sec-features]. 

```javascript 
function hi() {
  return "hello world";
}
```

[euler]: http://www.bing.com/search?q=euler "Bing Euler"

# FAQ

1. _Does the Madoko server store any documents_?\
    No, the madoko server just processes mathematical formulas,
    bibliographies, and PDF exports. All documents are sent over an
    encrypted connection and immediately removed after processing.
    Documents are only stored on your personal cloud storage but never 
    on the Madoko server.

2. _How can you show a preview_?\
    All the rendering for the preview and HTML export is done in the
    browser on your computer. 
   
3. _Can I work concurrently with other users on a document_?\
    In principle, yes, Madoko can handle this and merge conflicts.
    Unfortunately, Onedrive currently does not support such sharing of
    files ("_Creating, updating, or deleting files in a folder that is
    shared with the signed-in user is not supported by the OneDrive
    API._", [link][onedrive-sharing])

    For now, the best way to share is to synchronize to your Onedrive
    account and use a separate version control system to pull- and push
    updates to other users.
    
4. _What software does Madoko use_?\
   
   - [NodeJS]
   - [Express]
   - Madoko is written in the [Koka] language.
   - Madoko is free software and available on [codeplex] under the 
     Apache 2.0 license

[koka]:     http://www.rise4fun.com/koka/tutorial
[nodejs]:   http://nodejs.org
[express]:  http://expressjs.com
[codeplex]: http://madoko.codeplex.com
[onedrive-sharing]: http://msdn.microsoft.com/en-us/library/dn659731.aspx
</div>

<script>
// test browser features
if (typeof Worker === "undefined") {
  document.getElementById("oldbrowser").style.display = "block";
}
else {
  document.getElementById("app").style.display = "block"; 
}
</script>


<!-- onedrive -->
<script src="//js.live.net/v5.0/wl.debug.js"></script> 

<script>
require([ "../scripts/storage" ], function(storage) 
{ 
  storage.onedriveInit({
    client_id   : "000000004C113E9D",
    redirect_uri: "https://www.madoko.net/redirect/live", 
    scope       : ["wl.signin","wl.skydrive","wl.skydrive_update"],
  });
});
</script>

</body>
</html>
